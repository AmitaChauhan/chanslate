<template name="room">
  {{>backButton}}
  <h2 class="ui center aligned segment header">{{roomName}}</h2>
  {{>showMessages}}
  {{>requestNotificationPermission}}
  {{>postMessage}}
</template>

<template name="roomNotFound">
  {{>backButton}}
  <p>Sorry, the room you tried to access is either not available or doesn't
  exist.</p>
</template>

<template name="backButton">
  <a href="{{pathFor 'rooms'}}" class="ui mini button">
    <i class="icon left"></i>All rooms
  </a>
</template>

<template name="showMessages">
  <ul class="messages">
    {{#each messages}}
      <li class="ui">
        <div class="msg-info">
          <span class="user-name" style="color:{{#colorize}}{{/colorize}}">
            {{username userId}}
          </span>

          <span class="ui small label time">
            <i class="icon time"></i>
            <time class="js-auto-update" datetime="{{toISO at}}">
              {{ago at}}
            </time>
          </span>
        </div>

        <div class="ui msg-detail">
            <div class="ui top attached src message-box segment">
              {{>message original}}
            </div>

            {{#each enumTranslations}}
              {{#if equals $indexBaseOne ../engines.length}}
                <div class="ui attached bottom dst message-box segment">
                  {{>message}}
                </div>
              {{else}}
                <div class="ui attached dst message-box segment">
                  {{>message}}
                </div>
              {{/if}}
            {{/each}}

            {{#unless equals translations.length engines.length}}
              <div class="ui bottom attached dst message-box segment">
                <p>Translating ... <i class="icon loading"></i></p>
              </div>
            {{/unless}}
        </div>
      </li>
    {{/each}}
  </ul>
</template>

<template name="message">
  <p class="message">
    {{unescape text}}
    {{>msgInfo}}
  </p>
</template>

<template name="msgInfo">
  <label class="ui label info">{{lang}} / {{createdBy}}</label>
</template>

<template name="postMessage">
  <div class="ui horizontal icon divider">
    <i class="circular icon pencil"></i>
  </div>
  <form class="ui two stackable column grid choose-engine">
    <div class="column ui form">
      <span class="field ui checkbox toggle">
        <input id   = "google-engine-selector"
               type = "checkbox"
               name = "google"
               {{googleChecked}} />
        <label for="google-engine-selector">Google Translator</label>
      </span>
    </div>

    <div class="column ui form">
      <span class="field ui checkbox toggle">
        <input id   = "bing-engine-selector"
               type = "checkbox"
               name = "bing"
               {{bingChecked}} />
        <label for="bing-engine-selector">Bing Translator</label>
      </span>
    </div>

  </form>

  <form class="ui two stackable column grid post-message">
    <div class="column ui form">
      <span class="field">
        <input name="src" type="text"
               placeholder="{{srcLangPlaceholder}}" />
      </span>
    </div>
    <div class="column ui form">
      <span class="field">
        <input name="dst" type="text"
               placeholder="{{dstLangPlaceholder}}" />
      </span>
    </div>
  </form>
</template>

<template name="requestNotificationPermission">
  {{#if needsPermissionAndSupported}}
    <p>
      Click <button id="request-notification-permission" class="ui mini teal button">here</button>
      to allow notifications.
    </p>
  {{/if}}
</template>


