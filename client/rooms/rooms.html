<!-- TODO (UU): Break into smaller templates -->
<template name="rooms">
  {{#unless showCreateRoomForm}}
    <button id="add-room" class="ui button fluid small teal">
      <i class="icon add sign"></i>Add Room
    </button>
  {{else}}
    <form id="new-room-form" class="ui small form fluid segment">
      <div class="two fields">
        <div class="field {{roomNameInError}}">
          <label>Room Name</label>
          <input name        = "room-name"
                 class       = "required"
                 type        = "text"
                 value       = ""
                 placeholder = "Room name" />
        </div>

        <div class="disabled field {{roomSecretInError}}">
          <label>Room Secret</label>
          <!-- May make this editable later -->
          <input name        = "room-secret"
                 type        = "text"
                 value       = "{{getNewRoomSecret}}"
                 disabled />
        </div>
      </div>

      <div class="two fields">
        <div class="field {{srcLangInError}}">
          <label>Source language (code)</label>
          <input name        = "src-lang"
                 type        = "text"
                 value       = "en"
                 placeholder = "Source language code">
        </div>

        <div class="field {{dstLangInError}}">
          <label>Destination language (code)</label>
          <input name        = "dst-lang"
                 type        = "text"
                 value       = "de"
                 placeholder = "Destination language code">
        </div>
      </div>

      <div class="field ui buttons floated right">
        <button id    = "cancel-add-room"
                type  = "button"
                class = "ui button">
          Cancel
        </button>

        <div class="or"></div>

        <button id    = "create-room"
                type  = "submit"
                class = "ui positive button">
          Create
        </button>
      </div>
    </form>
  {{/unless}}

  <div class="ui list rooms-list">
    {{#each rooms}}
      <div class="item">
        <i class="chat icon"></i>

        {{#if showConfirmRemove this}}
          <p>Are you sure you want to
            {{#if isAdmin}}
              delete the room?
            {{else}}
              leave the room?
            {{/if}}
          </p>

        {{else}}
          <button class= "ui primary floated right icon button js-delete"
                  type = "button">

            {{#if isAdmin}}
              <i class="icon trash" title="Delete this room"></i>
            {{else}}
              <i class="icon minus" title="Remove yourself from this room"></i>
            {{/if}}

          </button>

        {{/if}}

        <div class="content">
          <div class="header">
            <a class="ui link" href="{{pathFor 'room'}}">
              {{name}}
            </a>
          </div>

          <div class="description ui horizontal list room-tags">

            <div class="item">
              <label class="ui label">
                <i class="icon time"></i>
                <time class="js-auto-update" datetime="{{toISO createdAt}}">
                  {{ago createdAt}}
                </time>
              </label>
            </div>

            <div class="item">
              <label class="ui label">
                <i class="icon users"></i>
                {{count users}}
              </label>
            </div>

            <div class="item">
              <label class="ui label">
                <i class="icon star"></i>
                {{username createdByUserId}}
              </label>
            </div>

             <div class="item">
               <div class="ui mini icon input secret-link">
                 <input type  = "text"
                       value  = "{{roomSecretLink}}"
                       title  = "Copy and share this link to add users to this chat room"
                       readonly />
                 <i class="disabled icon url"></i>
               </div>
             </div>

          </div>
        </div>
      </div>
    {{/each}}
  </div>
</template>
