<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="google" content="notranslate" />
  <meta name="viewport" content="width=device-width">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans|Ubuntu:500' rel='stylesheet' type='text/css'>
  <title>Chanslate</title>
</head>

<body>
  <div id="container">
    <div class="ui sixteen wide column">
      <h1 class="ui header banner">Chanslate</h1>
    </div>

    <div id="chanslate-content">
      {{>showMessages}}
      {{>requestNotificationPermission}}
      {{>postMessage}}
    </div>
  </div>
</body>

<template name="requestNotificationPermission">
  {{#if needsPermissionAndSupported}}
    <p>
      Click <button id="request-notification-permission" class="ui mini teal button">here</button>
      to allow notifications.
    </p>
  {{/if}}
</template>

<template name="showMessages">
  <ul class="messages">
    {{#each messages}}
      <li class="ui">
        <div class="msg-info">
          <span class="user-name" style="color:{{#colorize}}{{/colorize}}">
            {{userName}}
          </span>

          <span class="ui small label time">
            <time class="message-time" datetime="{{toISO at}}">
              {{ago at}}
            </time>
          </span>
        </div>

        <div class="ui msg-detail">
            <div class="ui top attached src message-box segment">
              {{>message original}}
            </div>

            {{#each enumTranslations}}
              {{#if equals $indexBaseOne engines.length}}
                <div class="ui attached bottom dst message-box segment">
                  {{>message}}
                </div>
              {{else}}
                <div class="ui attached dst message-box segment">
                  {{>message}}
                </div>
              {{/if}}
            {{/each}}

            {{#unless equals translations.length engines.length}}
              <div class="ui bottom attached dst message-box segment">
                <p>Translating ...</p>
                <div class="ui active inverted dimmer">
                  <div class="ui mini loader"></div>
                </div>
              </div>
            {{/unless}}
        </div>
      </li>
    {{/each}}
  </ul>
</template>

<template name="message">
  <p class="message">
    {{unescape text}}
    {{>msgInfo}}
  </p>
</template>

<template name="msgInfo">
  <label class="ui label info">{{lang}} / {{createdBy}}</label>
</template>

<template name="postMessage">
  <div class="ui horizontal icon divider">
    <i class="circular icon pencil"></i>
  </div>
  <form class="ui two stackable column grid choose-engine">
    <div class="column ui form">
      <span class="field ui checkbox toggle">
        <input id   = "google-engine-selector"
               type = "checkbox"
               name = "google"
               {{googleChecked}} />
        <label for="google-engine-selector">Google Translator</label>
      </span>
    </div>

    <div class="column ui form">
      <span class="field ui checkbox toggle">
        <input id   = "bing-engine-selector"
               type = "checkbox"
               name = "bing"
               {{bingChecked}} />
        <label for="bing-engine-selector">Bing Translator</label>
      </span>
    </div>

  </form>

  <form class="ui two stackable column grid post-message">
    <div class="column ui form">
      <span class="field">
        <input name="src" type="text"
               placeholder="Type in English..." />
      </span>
    </div>
    <div class="column ui form">
      <span class="field">
        <input name="dst" type="text"
               placeholder="Type in German..." />
      </span>
    </div>
  </form>
</template>


